<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Especialidades</title>
    <!-- Agregar el enlace al CDN de Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Estilos personalizados */
        .menu-option {
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            transition: all 0.3s ease-in-out;
        }

        .menu-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Estilo para el footer */
        footer {
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    <style>
        /* Pegar el CSS del fondo animado aquí */
        @tailwind base;
        @tailwind components;
        @tailwind utilities;

        /*Start Animations*/
        @-webkit-keyframes animatetop {
            from {
                top: -300px;
                opacity: 0;
            }
            to {
                top: 0;
                opacity: 1;
            }
        }
        @keyframes animatetop {
            from {
                top: -300px;
                opacity: 0;
            }
            to {
                top: 0;
                opacity: 1;
            }
        }
        @-webkit-keyframes zoomIn {
            0% {
                opacity: 0;
                -webkit-transform: scale3d(0.3, 0.3, 0.3);
                transform: scale3d(0.3, 0.3, 0.3);
            }
            50% {
                opacity: 1;
            }
        }
        @keyframes zoomIn {
            0% {
                opacity: 0;
                -webkit-transform: scale3d(0.3, 0.3, 0.3);
                transform: scale3d(0.3, 0.3, 0.3);
            }
            50% {
                opacity: 1;
            }
        }
        /*End Animations*/
        /*
        -- Start BackGround Animation 
        */
        .area {
            background: #ffffff;
            background: -webkit-linear-gradient(to bottom, #ffffff 0%, #f0f0f0 100%);
            width: 100%;
            height: 100vh;
            position: absolute;
            z-index: -1;
        }

        .circles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 96%;
            overflow: hidden;
        }

        .circles li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: rgba(32, 92, 211, 0.554); /* Ajuste del color de los círculos */
            animation: animate 25s linear infinite;
            bottom: -150px;
        }

        .circles li:nth-child(1) {
            left: 25%;
            width: 80px;
            height: 80px;
            animation-delay: 0s;
        }

        .circles li:nth-child(2) {
            left: 10%;
            width: 20px;
            height: 20px;
            animation-delay: 2s;
            animation-duration: 12s;
        }

        .circles li:nth-child(3) {
            left: 70%;
            width: 20px;
            height: 20px;
            animation-delay: 4s;
        }

        .circles li:nth-child(4) {
            left: 40%;
            width: 60px;
            height: 60px;
            animation-delay: 0s;
            animation-duration: 18s;
        }

        .circles li:nth-child(5) {
            left: 65%;
            width: 20px;
            height: 20px;
            animation-delay: 0s;
        }

        .circles li:nth-child(6) {
            left: 75%;
            width: 110px;
            height: 110px;
            animation-delay: 3s;
        }

        .circles li:nth-child(7) {
            left: 35%;
            width: 150px;
            height: 150px;
            animation-delay: 7s;
        }

        .circles li:nth-child(8) {
            left: 50%;
            width: 25px;
            height: 25px;
            animation-delay: 15s;
            animation-duration: 45s;
        }

        .circles li:nth-child(9) {
            left: 20%;
            width: 15px;
            height: 15px;
            animation-delay: 2s;
            animation-duration: 35s;
        }

        .circles li:nth-child(10) {
            left: 85%;
            width: 150px;
            height: 150px;
            animation-delay: 0s;
            animation-duration: 11s;
        }

        @keyframes animate {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                border-radius: 0;
            }

            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
                border-radius: 50%;
            }
        }
        /*
        -- End BackGround Animation 
        */
        
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900">
    <!-- Contenedor del fondo animado -->
    <div class="area">
        <!-- Contenedor de las animaciones de círculos -->
        <ul class="circles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

    <!-- El contenido de tu página aquí -->
    <div class="container mx-auto px-0 py-0">
        <!-- Agrega aquí el contenido de tu página -->
        <div class="bg-blue-500 text-white p-4 flex justify-between items-center">
            <h1 class="text-xl font-bold">Consulta de Especialidades</h1>
            <img class="h-12 w-auto" src="https://www.tecnm.mx/images/tecnm_virtual/tecnm.png" alt="Tu Empresa">
        </div>
    
        <!-- Dropdown para seleccionar especialidad -->
        <!-- Contenedor flex para alinear el menú desplegable y el botón de selección -->
     <!-- Contenedor flex para alinear el menú desplegable y el botón de selección -->
<div class="relative mb-4 z-10 mt-8 flex justify-center items-center">
    <!-- Menú desplegable -->
    <button id="dropdown-btn" class="px-4 py-2 text-white bg-blue-500 rounded-md">Selecciona una especialidad</button>
    <div id="dropdown" class="absolute left-0 w-40 mt-2 origin-top-left bg-white divide-y divide-gray-100 rounded-md shadow-lg hidden transition duration-300">
        <div id="dropdown-options" class="py-1">
            <!-- Las opciones se llenarán aquí -->
        </div>
    </div>
    <!-- Botón de selección -->
    <button id="btn-seleccionar" class="ml-2 px-4 py-2 bg-green-500 text-white rounded-md">Seleccionar</button>
</div>


        <!-- Contenedor de la tabla -->
        <div id="tabla-contenedor" class="w-full max-w-4xl mx-auto"></div>
    
        <!-- Botón de regresar al menú -->
<!-- Botón de regresar al menú -->
        <div id="menu-btn" class="max-w-sm mx-auto mt-4" style="display: none;">
            <button onclick="window.location.href='menu.html'"
                class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Regresar al Menú</button>
        </div>

    </div>

    <footer class="bg-gray-800 py-3">
        <div class="container mx-auto text-center text-white">
            <p>&copy; 2024 Josue y Adan Company. Todos los derechos reservados.</p>
        </div>
    </footer>
    
    <script>
             document.addEventListener('DOMContentLoaded', async () => {
            const carrera = localStorage.getItem('carrera') || 1;
            const dropdownOptions = document.getElementById('dropdown-options');
            const dropdownBtn = document.getElementById('dropdown-btn');
            const dropdown = document.getElementById('dropdown');

            dropdownBtn.addEventListener('click', () => {
                dropdown.classList.toggle('hidden');
            });

            try {
                const response = await fetch(`https://api-tecnm.onrender.com/especialidades/${carrera}`);
                const data = await response.json();

                data.forEach(especialidad => {
                    const option = document.createElement('a');
                    option.href = '#';
                    option.className = 'block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100';
                    option.textContent = especialidad.nombre;
                    option.dataset.id = especialidad.id; // Asignar el id de la especialidad al dataset
                    option.addEventListener('click', () => {
                        document.querySelector('.selected')?.classList.remove('selected');
                        option.classList.add('selected');
                        dropdownBtn.textContent = especialidad.nombre;
                        dropdown.classList.add('hidden');
                    });
                    dropdownOptions.appendChild(option);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        });

        document.getElementById('btn-seleccionar').addEventListener('click', async () => {
    const selectedOption = document.querySelector('.selected');
    if (selectedOption) {
        const especialidadId = selectedOption.dataset.id;
        try {
            const response = await fetch(`https://api-tecnm.onrender.com/materias_especialidad/${especialidadId}`);
            const data = await response.json();
            actualizarTabla(data);
            document.getElementById('menu-btn').style.display = 'block'; // Hace visible el botón de regresar al menú
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    } else {
        alert('No has seleccionado ninguna especialidad.');
    }
});


        function actualizarTabla(data) {
            const tabla = `
                <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                    <table class="w-full text-sm text-left text-blue-100">
                        <thead class="text-xs text-white uppercase bg-blue-600">
                            <tr>
                                <th scope="col" class="px-6 py-3">ID</th>
                                <th scope="col" class="px-6 py-3">Nombre</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${data.map(materia => `
                                <tr class="bg-blue-500 border-b border-blue-400">
                                    <td class="px-6 py-4 font-medium text-blue-50 whitespace-nowrap">${materia.id}</td>
                                    <td class="px-6 py-4">${materia.nombre}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>`;
            
            document.getElementById('tabla-contenedor').innerHTML = tabla;
        }
    </script>
</body>

</html>

